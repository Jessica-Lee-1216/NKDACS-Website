<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta http-equiv="Content-Type" content="charset=utf-8" />
        <title>2019nCoV</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />
        <link rel="icon" href="../../assets/img/icon.png" type="image/x-icon"/>
        <!-- Fonts and icons -->
        <script src="../../assets/js/plugin/webfont/webfont.min.js"></script>
        <script>
            WebFont.load({
                google: {"families":["Open+Sans:300,400,600,700"]},
                custom: {"families":["Flaticon", "Font Awesome 5 Solid", "Font Awesome 5 Regular", "Font        Awesome 5 Brands"], urls: ['../../assets/css/fonts.css']},
                active: function() {
                    sessionStorage.fonts = true;
                }
            });
        </script>
        <!-- CSS Files -->
        <link rel="stylesheet" href="../../assets/css/bootstrap.min.css">
        <link rel="stylesheet" href="../../assets/css/azzara.min.css">
    </head>
    <body>
        <div class="wrapper">
            <div class="main-header" data-background-color="purple">
                <!-- Logo Header -->
                <div class="logo-header">
                    <a href="../index.html" class="logo">
                        <img src="../../assets/img/logonkdacs.svg" alt="navbar brand" class="navbar-brand">
                    </a>
                    <button class="navbar-toggler sidenav-toggler ml-auto" type="button" data-toggle="collapse" data-target="collapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon">
                            <i class="fa fa-bars"></i>
                        </span>
                    </button>
                    <button class="topbar-toggler more">
                        <i class="fa fa-ellipsis-v"></i>
                    </button>
                    <div class="navbar-minimize">
                        <button class="btn btn-minimize btn-rounded">
                            <i class="fa fa-bars"></i>
                        </button>
                    </div>
                </div>
                <!-- Navbar Header -->
                <nav class="navbar navbar-header navbar-expand-lg">
                    <div class="container-fluid">
                        <ul class="navbar-nav topbar-nav ml-md-auto align-items-center">
                            <li class="nav-item dropdown hidden-caret">
                                <a class="nav-link dropdown-toggle" href="#" id="messageDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fa fa-info"></i>
                                </a>
                                <ul class="dropdown-menu animated fadeIn" aria-labelledby="infoDropdown">
                                    <li>
                                        <div class="dropdown-item">
                                            <h5 style="text-align:center;margin:0;">NKDACS数据可视化</h5>
                                        </div>
                                        <div class="dropdown-divider"></div>
                                        <div class="dropdown-item">
                                            <p class="text-muted" style="text-align:center;text-indent:0;font-size:14px;margin:0;">陈笑洋 张宸玥 王玉珏 刘城昕 马佳明</p>
                                        </div>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown hidden-caret">
                                <a class="dropdown-toggle profile-pic" data-toggle="dropdown" href="#" aria-expanded="false">
                                    <div class="avatar-sm">
                                        <img src="../../assets/img/nankai.jpg" alt="..." class="avatar-img rounded-circle">
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-background"></div>
                <div class="sidebar-wrapper scrollbar-inner">
                    <div class="sidebar-content">
                        <div class="user">
                                <div class="avatar">
                                <img src="../../assets/img/nankai_.png">
                                </div>
                        </div>
                        <ul class="nav">
                            <li class="nav-item">
                                <a href="../index.html">
                                    <i class="fas fa-home"></i>
                                    <p>项目介绍</p>
                                </a>
                            </li>
                            <li class="nav-item active">
                                <a data-toggle="collapse" href="#situation">
                                    <i class="fas fa-chart-bar"></i>
                                    <p>疫情发展</p>
                                    <span class="caret"></span>
                                </a>
                                <div class="collapse show" id="situation">
                                    <ul class="nav nav-collapse">
                                        <li>
                                            <a href="predict.html">
                                                <span class="sub-item">疫情发展预测</span>
                                            </a>
                                        </li>
                                        <li class="active">
                                            <a href="review.html">
                                               <span class="sub-item">疫情发展回顾</span> 
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- Main Panel -->
            <div class="main-panel">
                <div class="content">
                    <div class="page-inner">
                        <div class="row">
                            <div class="col-md-6 ml-auto mr-auto" style="padding:0 2.5%;">
                                <div class="page-header">
                                    <h4 class="page-title">疫情发展回顾</h4>
                                </div>
                                <p>随着新型冠状病毒肺炎疫情的蔓延，每日更新的疫情相关数据和新闻牵动着亿万人的心。危难时刻，医务工作者逆行向前，争分夺秒与病魔抗战；工人、记者、人民警察放弃假期和团聚，坚守在疫情防控第一线。向所有一线工作者致敬，我们安危与共，齐心抗疫！</p>
                                <div class="c">
                                    <h4><i class="fas fa-chevron-right" style="margin-right:5px;"></i>全国各地确诊人数分布图</h4>
                                    <div class="c-ratio">
                                        <div class="chart" id="map"></div>
                                    </div>
                                </div>
                                <div class="c">
                                    <h4><i class="fas fa-chevron-right" style="margin-right:5px;"></i>全国确诊人数日历图</h4>
                                    <ul class="nav nav-pills nav-secondary nav-pills-no-bd" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link active" id="pills-home-tab-nobd" data-toggle="pill" href="#pills-home-nobd" role="tab" aria-controls="pills-home-nobd" aria-selected="false">2020年1月</a>
                                            </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="pills-profile-tab-nobd" data-toggle="pill" href="#pills-profile-nobd" role="tab" aria-controls="pills-profile-nobd" aria-selected="true">2020年2月</a>
                                        </li>
                                    </ul>
                                    <div class="tab-content">
                                        <div class="tab-pane fade show active" id="pills-home-nobd" role="tabpanel" aria-labelledby="pills-home-tab-nobd">
                                            <div class="c-height" style="height:420px;">
                                                <div class="chart" id="calendar1"></div>
                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="pills-profile-nobd" role="tabpanel" aria-labelledby="pills-profile-tab-nobd">
                                            <div class="c-height" style="height:420px;">
                                                <div class="chart" id="calender2"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <h4><i class="fas fa-chevron-right" style="margin-right:5px;"></i>全国新型冠状病毒肺炎大事记</h4>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--   Core JS Files   -->
        <script src="../../assets/js/core/jquery.3.2.1.min.js"></script>
        <script src="../../assets/js/core/popper.min.js"></script>
        <script src="../../assets/js/core/bootstrap.min.js"></script>
        <!-- jQuery UI -->
        <script src="../../assets/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
        <script src="../../assets/js/plugin/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js"></script>
        <!-- jQuery Scrollbar -->
        <script src="../../assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>
        <!-- Azzara JS -->
        <script src="../../assets/js/ready.min.js"></script>
        <!-- echart JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.6.0/echarts.min.js"></script>
        <!-- ChinaMap JS -->
        <script src="../../assets/js/china.js"></script>
        <script type="text/javascript">
            function dataJson(fileData) {
                mapdata = fileData;
            }
        </script>
            <script type="text/javascript" src="./mapdata.json?cb=dataJson"></script>
        <script type="text/javascript">
            mapDate = [];
            mapOptions = [];
            for (i = 0; i < mapdata.length; i++) {
                tmp = [];
                mapDate.push(mapdata[i].date);
                delete mapdata[i].date;
                for (key in mapdata[i]) {
                    tmp.push({name: key, value: mapdata[i][key]});
                };
                mapOptions.push({title: {text: mapDate[i].replace(".","月")+"日"}, series: {data: tmp}});
            };
            dateList1 = [[ "2020-1-1","初七","*","华南海鲜市场休市"],[ "2020-1-2","初八"],[ "2020-1-3","初九" ],[ "2020-1-4","初十" ],[ "2020-1-5","十一" ],[ "2020-1-6","十二" ],[ "2020-1-7","十三" ],[ "2020-1-8","十四" ],[ "2020-1-9","十五" ],[ "2020-1-10","十六" ],[ "2020-1-11","十七" ],[ "2020-1-12","十八" ],[ "2020-1-13","十九" ],[ "2020-1-14","二十" ],[ "2020-1-15","廿一" ],[ "2020-1-16","廿二" ],[ "2020-1-17","廿三" ],[ "2020-1-18","廿四" ],[ "2020-1-19","廿五" ],[ "2020-1-20","廿六","*","提出确定有人传人现象" ],[ "2020-1-21","廿七" ],[ "2020-1-22","廿八" ],[ "2020-1-23","廿九","武汉封城","武汉封城" ],[ "2020-1-24","除夕","*","湖北省启动一级响应" ],[ "2020-1-25","春节","*","火神山医院开工" ],[ "2020-1-26","初二","*","雷神山医院开工"],[ "2020-1-27","初三" ],[ "2020-1-28","初四" ],[ "2020-1-29","初五" ],[ "2020-1-30","初六" ],[ "2020-1-31","初七","*"," WHO宣布把此次疫情列为PHEIC" ]];
            heatmapData1=[];lunarData1=[];people1=[27,27,27,27,27,27,27,27,27,41,41,41,41,41,41,45,62,121,198,291,440,571,830,1287,1975,2744,4515,5974,7711,8149,11791];
            for (var i = 0; i < dateList1.length; i++) {
                heatmapData1.push([
                    dateList1[i][0],
                    people1[i]
                ]);
                lunarData1.push([
                    dateList1[i][0],
                    1,
                    dateList1[i][1],
                    dateList1[i][2],
                    dateList1[i][3]
                ]);
            };
            dateList2 = [[ "2020-2-1","初八"],[ "2020-2-2","初九","*","火神山医院完工" ],[ "2020-2-3","初十","*","火神山医院开始接诊，武汉连夜建三所“方舱医院”" ],[ "2020-2-4","十一" ],[ "2020-2-5","十二","*","武昌方舱医院开始接诊首批确诊轻微病患(晚23:40）" ],[ "2020-2-6","十三","*","武汉国际会展中心的方舱医院正式接诊"],[ "2020-2-7","十四" ],[ "2020-2-8","十五","*","雷神山医院交付使用" ],[ "2020-2-9","十六" ],[ "2020-2-10","十七" ],[ "2020-2-11","十八","*","世界卫生组织将新型冠状病毒命名为“COVID-19”" ],[ "2020-2-12","十九" ],[ "2020-2-13","二十","*","湖北省将临床诊断病例数纳入确诊病例数进行公布"],[ "2020-2-14","廿一" ],[ "2020-2-15","廿二" ],[ "2020-2-16","廿三" ],[ "2020-2-17","廿四" ],[ "2020-2-18","廿五" ],[ "2020-2-19","廿六" ],[ "2020-2-20","廿七" ],[ "2020-2-21","廿八" ],[ "2020-2-22","廿九" ],[ "2020-2-23","初一" ],[ "2020-2-24","初二","*" ],[ "2020-2-25","初三" ],[ "2020-2-26","初四"],[ "2020-2-27","初五" ],[ "2020-2-28","初六" ],[ "2020-2-29","初七" ]];
            heatmapData2=[];lunarData2=[];people2=[14380,17205,20438,24324,28018,31161,34546,37198,40171,42638,44653,59804,63851];
            for (var i = 0; i < dateList2.length; i++) {
                heatmapData2.push([
                    dateList2[i][0],
                    people2[i]
                ]);
                lunarData2.push([
                    dateList2[i][0],
                    1,
                    dateList2[i][1],
                    dateList2[i][2],
                    dateList2[i][3]
                ]);
            };
            
        </script>
        <script type="text/javascript">
            var myChart1 = echarts.init(document.getElementById('map'));
            var myChart2 = echarts.init(document.getElementById('calendar1'));
            var myChart3 = echarts.init(document.getElementById('calender2'));
            option1 = {
                baseOption: {
                    timeline: {
                        data: mapDate,
                        axisType: 'category',
                        autoPlay: true,
                        playInterval: 750,
                        left: 'center',
                        bottom: -15,
                        width: '95%',
                        label: {
                            position: 7,
                            emphasis: {
                                textStyle: {
                                    color: '#808B96'
                                }
                            }
                        },
                        symbol: 'none',
                        checkpointStyle: {
                            borderColor: '#777',
                            borderWidth: 2
                        },
                        controlStyle: {
                            itemSize: 18,
                            emphasis: {
                                color: '#aaa',
                                borderColor: '#aaa'
                            }
                        }
                    },
                    tooltip: {
                        trigger: 'item'
                    },
                    title: {
                        left: 13,
                        //borderWidth: 2,
                        textStyle: {
                            fontSize: 15,
                            fontWeight: 'normal'
                        }
                    },
                    visualMap: {
                        type: 'piecewise',
                        pieces: [{
                                min: 1000,
                                color: '#922b21'
                            },
                            {
                                min: 500,
                                max: 999,
                                color: '#c0392b'
                            },
                            {
                                min: 250,
                                max: 499,
                                color: '#cd6155'
                            },
                            {
                                min: 100,
                                max: 249,
                                color: '#d98880'
                            },
                            {
                                min: 10,
                                max: 99,
                                color: '#e6B0aa'
                            },
                            {
                                min: 1,
                                max: 9,
                                color: '#f9ebea'
                            },
                            {
                                value: 0,
                                color: 'white'
                            }
                        ],
                        itemWidth: 9,
                        itemHeight: 16,
                        itemGap: -2,
                        textStyle: {
                            color: '#7B93A7'
                        },
                        bottom: '8%',
                        left: "2%",
                    },
                    series: [
                        {
                            name: '确诊数',
                            type: 'map',
                            mapType: 'china',
                            top: '10%',
                            zoom: 1.25,
                            itemStyle: {
                                emphasis: {
                                    borderWidth: 1,
                                    borderColor: '#566573',
                                    areaColor: '#F8F9F9'
                                }
                            }}]
                },
                options: mapOptions
            };
            option2 = {
                backgroundColor:'transparent',
                tooltip: {
                    formatter: function (params) {
                        var a;
                        for (var i = 0; i < dateList1.length; i++) {
                            if(lunarData1[i][0]==params.value[0]){
                                a=lunarData1[i][4]
                            }
                        }
                        return a;
                    }
                },
                visualMap: {
                    "min": 0,
                    "max": 15000,
                    "calculable": true,
                    "seriesIndex": [2],
                    "orient": "horizontal",
                    "right": "center",
                    "bottom": "0%",
                    "color": ["#3686e7", "#bcfdd6"]
                },
                calendar: [{
                    left: '4%',
                    right: '4%',
                    top: '4%',
                    bottom: '10%',
                    cellSize: [150, 80],
                    yearLabel: {show: false},
                    orient: 'vertical',
                    dayLabel: {
                        show: false,
                        firstDay: 1,
                        nameMap: 'cn'
                    },
                    monthLabel: {
                        show: true,
                        color:'#fff'
                    },
                    range: '2020-01'
                }],
                series: [{
                    type: 'scatter',
                    coordinateSystem: 'calendar',
                    symbolSize: 1,
                    label: {
                        normal: {
                            show: true,
                            formatter: function (params) {
                                var d = echarts.number.parseDate(params.value[0]);
                                return d.getDate() + '\n\n' + params.value[2] + '\n\n';
                            },
                            textStyle: {
                                color: '#000'
                            }
                        }
                    },
                    data: lunarData1
                }, {
                    type: 'scatter',
                    coordinateSystem: 'calendar',
                    symbolSize: 1,
                    label: {
                        normal: {
                            show: true,
                            formatter: function (params) {
                                return '\n\n\n' + (params.value[3] || '');
                            },
                            textStyle: {
                                fontSize: 14,
                                fontWeight: 700,
                                color: "#CD5C5C"
                            }
                        }
                    },
                    data: lunarData1
                }, {
                    name: '确诊数',
                    type: 'heatmap',
                    coordinateSystem: 'calendar',
                    data: heatmapData1
                }]
            };
            option3 = {
                backgroundColor:'transparent',
                tooltip: {
                    formatter: function (params) {
                        var a;
                        for (var i = 0; i < dateList2.length; i++) {
                            if(lunarData2[i][0]==params.value[0]){
                                a=lunarData2[i][4]
                            }
                        }
                        return a;
                    }
                },
                visualMap: {
                    "min": 10000,
                    "max": 100000,
                    "calculable": true,
                    "seriesIndex": [2],
                    "orient": "horizontal",
                    "right": "center",
                    "bottom": "0%",
                    "color": ["#3686e7", "#bcfdd6"]
                },
                calendar: [{
                    left: '4%',
                    right: '4%',
                    top: '4%',
                    bottom: '10%',
                    cellSize: [150, 80],
                    yearLabel: {show: false},
                    orient: 'vertical',
                    dayLabel: {
                        show: false,
                        firstDay: 1,
                        nameMap: 'cn'
                    },
                    monthLabel: {
                        show: true,
                        color:'#fff'
                    },
                    range: '2020-02'
                }],
                series: [{
                    type: 'scatter',
                    coordinateSystem: 'calendar',
                    symbolSize: 1,
                    label: {
                        normal: {
                            show: true,
                            formatter: function (params) {
                                var d = echarts.number.parseDate(params.value[0]);
                                return d.getDate() + '\n\n' + params.value[2] + '\n\n';
                            },
                            textStyle: {
                                color: '#000'
                            }
                        }
                    },
                    data: lunarData2
                }, {
                    type: 'scatter',
                    coordinateSystem: 'calendar',
                    symbolSize: 1,
                    label: {
                        normal: {
                            show: true,
                            formatter: function (params) {
                                return '\n\n\n' + (params.value[3] || '');
                            },
                            textStyle: {
                                fontSize: 14,
                                fontWeight: 700,
                                color: "#CD5C5C"
                            }
                        }
                    },
                    data: lunarData2
                }, {
                    name: '确诊数',
                    type: 'heatmap',
                    coordinateSystem: 'calendar',
                    data: heatmapData2
                }]
            };
            myChart1.setOption(option1);
            myChart2.setOption(option2);
            myChart3.setOption(option3);
            charts = [myChart1,myChart2,myChart3];
            $('a[data-toggle="pill"]').on('shown.bs.tab', function(e) {
                for(var i = 0; i < charts.length; i++) {
                    charts[i].resize();
                }
            });
            $(window).resize(function(){
                for(var i = 0; i < charts.length; i++) {
                    charts[i].resize();
                }
            });
        </script>
        
    </body>
</html>  
